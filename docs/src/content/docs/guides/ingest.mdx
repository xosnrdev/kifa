---
title: Ingestion
description: Ingest log lines from stdin, files, TCP, and UDP sources.
---

import {
  Tabs,
  TabItem,
  LinkCard,
  CardGrid,
} from "@astrojs/starlight/components";

`kifa ingest` reads log lines from one or more sources and persists them to disk. Each line becomes one entry in the write-ahead log.

## Input Sources

| Flag      | Description                        | Example                                       |
| --------- | ---------------------------------- | --------------------------------------------- |
| `--stdin` | Read from standard input           | `echo "log" \| kifa ingest --stdin -d ./data` |
| `--file`  | Tail a log file (repeatable)       | `--file /var/log/app.log`                     |
| `--tcp`   | Listen on TCP address (repeatable) | `--tcp 127.0.0.1:5514`                        |
| `--udp`   | Listen on UDP address (repeatable) | `--udp 0.0.0.0:5515`                          |

At least one source is required. Sources can be combined.

## Examples

<Tabs>
  <TabItem label="stdin">
    Pipe from another process:

    ```bash title="Terminal"
    my-pos-app | kifa ingest --stdin -d /var/lib/kifa
    ```

  </TabItem>
  <TabItem label="Files">
    Tail multiple log files:

    ```bash title="Terminal"
    kifa ingest \
      --file /var/log/transactions.log \
      --file /var/log/payments.log \
      -d /var/lib/kifa
    ```

  </TabItem>
  <TabItem label="Network">
    TCP and UDP ingestion:

    ```bash title="Terminal"
    kifa ingest --tcp 127.0.0.1:5514 --udp 0.0.0.0:5515 -d /var/lib/kifa
    ```

  </TabItem>
  <TabItem label="Combined">
    All sources at once:

    ```bash title="Terminal"
    kifa ingest \
      --stdin \
      --file /var/log/app.log \
      --tcp 127.0.0.1:5514 \
      -d /var/lib/kifa
    ```

  </TabItem>
</Tabs>

## Shutdown

Send `SIGINT` (Ctrl+C) or `SIGTERM` for graceful shutdown. Kifa flushes pending data before exiting.

A second `SIGINT` forces immediate exit with code 130.

<CardGrid>
  <LinkCard
    title="Choosing a Flush Mode"
    description="Control durability guarantees per write."
    href="/kifa/guides/flush-modes/"
  />
  <LinkCard
    title="Deployment"
    description="Systemd integration and signal handling."
    href="/kifa/guides/deployment/"
  />
</CardGrid>
